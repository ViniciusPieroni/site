<!DOCTYPE html>
<html lang="ptbr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/cadastro.css">
    <link rel="shortcut icon" href="./imagens/simbolo_umbrella_cabecalho.png" type="image/x-icon">
    <title>Resident Evil</title>
</head>

<body>

    <!--   CABEÇALHO   -->
    <div class="cabecalho">
        <div class="caixa">
            <span>
            <img src="./imagens/simbolo_umbrella_cabecalho.png" alt=""><br> <i class="re">Resident Evil</i> 
          </span>
            <nav>
                <ul>
                    <li class="home">HOME</li>
                    <li><a href="login.html"> LOGIN</a></li>
                    <li>PERSONAGENS</li>
                    <li>DICAS</li>
                    <li>RUNS</li>
                </ul>
            </nav>
        </div>
    </div>
    <!--    Cadastro    -->

    <div class="container_cadastro">

        <div class="caixa">

            <h1 id="titulo_cadastro">FAÇA AQUI O SEU CADASTRO</h1><br>
            <form id="form_cadastro" method="post" onsubmit="return cadastrar()">
                Nome:
                <input size="70" type="text" name="nome" id="inp_nome" class="inp_cadastro" required minlength="4"><br> Email:
                <input size="70" type="email" name="email" id="inp_email" class="inp_cadastro" required minlength="4"> <br> Senha:
                <input size="20" type="password" name="senha" id="inp_senha" class="inp_cadastro" required minlength="4">

                <div class="caixa_checkbox">
                    <h2> Noticias diarias?
                        <input type="checkbox" class="check">
                    </h2>
                </div>

                <input type="submit" id="btn_entrar" value="Cadastrar" class="btn-green"><br>

        </div>
        </form>


    </div>

</body>

</html>
<script>
    function cadastrar() {
        var email = inp_email.value;

        if (email.indexOf('@') == -1 && email.indexOf('.com') == -1) {
            // o valor será verdadeiro quando estiver sem @ ou .com, ou seja, retornar um valor do indexOf igual à -1

            alert(`O email ${email} é um email INVÁLIDO`);

        } else {
            var formulario = new URLSearchParams(new FormData(form_cadastro));
            fetch("/usuarios/cadastrar", {
                method: "POST",
                body: formulario
            }).then(function(response) {



                if (response.ok) {
                    window.location.href = `login.html`;

                }


            });
        }

        return false;

    }
</script>